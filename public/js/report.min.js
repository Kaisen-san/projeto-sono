"use strict";var ALERTS={BAD:"alert--bad"},alert=function(e,t){var o=document.createElement("div");o.setAttribute("class","alert ".concat(t)),o.innerText=e,document.body.appendChild(o),setTimeout(function(){return o.remove()},5e3)};!function(){var o=document.getElementById("login");null!=o&&o.addEventListener("submit",function(e){e.preventDefault();var t=o.querySelector('input[name="password"]');axios.post("/report/login",{password:t.value}).then(function(e){var t=e.data,o=t.cookie,r=t.redirectTo;document.cookie=o,window.location.href=r}).catch(function(e){console.error(e),alert(e.response.data.error,ALERTS.BAD)})});var e=document.getElementById("logout");null!=e&&e.addEventListener("click",function(e){e.preventDefault(),axios.delete("/report/logout").then(function(e){var t=e.data,o=t.cookie,r=t.redirectTo;document.cookie=o,window.location.href=r}).catch(function(e){console.error(e),alert(e.response.data.error,ALERTS.BAD)})});var n=document.getElementById("report");null!=n&&n.addEventListener("submit",function(e){e.preventDefault();var t=n.querySelector('select[name="year"]'),o=n.querySelector('select[name="state"]'),r=n.querySelector('select[name="acceptTerms"]');axios.post("/report",{year:parseInt(t.value),state:o.value,acceptTerms:parseInt(r.value)}).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a"),r=e.headers["content-disposition"],n="output.csv";if(r){var a=r.match(/filename=(.+)/);2===a.length&&(n=a[1])}o.href=t,o.setAttribute("download",n),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(t)}).catch(function(e){console.error(e),alert(e.response.data.error,ALERTS.BAD)})})}();